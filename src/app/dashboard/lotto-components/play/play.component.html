<form *ngIf="activeTab === 'entry'" [formGroup]="playForm" class="form-wrap">
  <div class="options">
    <button
      class="option-btn"
      [class.active]="activeTime === time"
      [class.disabled]="isDisabled(time)"
      [style.backgroundColor]="isDisabled(time) ? 'red' : ''"
      [disabled]="isDisabled(time)"
      *ngFor="let time of timeOptions"
      (click)="selectTime(time)"
    >
      {{ time === '14:00:00' ? '2PM' : time === '17:00:00' ? '5PM' : time === '21:00:00' ? '9PM' : '' }}
    </button>
  </div>

  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

  <div class="container">
    <!-- Combination Input Field -->
    <div class="keypad-wrapper">
      <div class="target-area">
        <div *ngIf="combos.length > 0">
          <i class="fa fa-edit" (click)="activeTab = 'view'" title="Go to view"></i>
        </div>
        <input
          #combinationInput
          formControlName="combination"
          class="combination-input"
          placeholder="3 digits"
          (focus)="setActiveField('combination')"
          maxlength="3"
          readonly
          type="text"
        />
        <p>Combination</p>
      </div>
    </div>

    <div class="keypad-wrapper">
      <!-- Target Input -->
      <div class="target-area">
        <input
          #targetInput
          formControlName="target"
          class="target-input"
          placeholder="Enter target amount here"
          (focus)="setActiveField('target')"
          maxlength="3"
          readonly
          type="text"
        />
        <p>Target</p>
      </div>

      <!-- Ramble Input -->
      <div class="ramble-area">
        <input
          #rambleInput
          formControlName="ramble"
          class="ramble-input"
          placeholder="Enter ramble amount here"
          (focus)="setActiveField('ramble')"
          maxlength="3"
          readonly
          type="text"
        />
        <p>Ramble</p>
      </div>
    </div>

    <!-- Keypad -->
    <div class="keypad">
      <button type="button" (click)="handleKeyPress('7')">7</button>
      <button type="button" (click)="handleKeyPress('8')">8</button>
      <button type="button" (click)="handleKeyPress('9')">9</button>
      <button type="button" (click)="handleKeyPress('4')">4</button>
      <button type="button" (click)="handleKeyPress('5')">5</button>
      <button type="button" (click)="handleKeyPress('6')">6</button>
      <button type="button" (click)="handleKeyPress('1')">1</button>
      <button type="button" (click)="handleKeyPress('2')">2</button>
      <button type="button" (click)="handleKeyPress('3')">3</button>
      <button type="button" (click)="handleKeyPress('C')" class="clear">C</button>
      <button type="button" (click)="handleKeyPress('0')" class="zero">0</button>
      <button type="button" (click)="handleKeyPress('âŒ«')" class="backspace">âŒ«</button>
    </div>
  </div>

  <button type="submit" class="add-bet" [disabled]="!hasAvailableOptions" (click)="addBet()">Add Bet</button>
</form>

<div *ngIf="activeTab === 'view'" class="view-bets">
  <div class="tab-header">
    <i class="fa fa-arrow-left back-arrow" (click)="goBackToEntry()" title="Go back to Entry Bet"></i>
  </div>

  <h3 class="bets-summary-title">Bets Summary</h3>
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

  <table class="combo-table">
    <thead>
      <tr>
        <th>Ticket No.</th>
        <th>Combination</th>
        <th>Type</th>
        <th>Amount</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let combo of combos">
        <td>{{ combo.tId }}</td>
        <td>{{ combo.cmb }}</td>
        <td>{{ combo.typ }}</td>
        <td>{{ combo.amt }}</td>
        <td>
          <button class="remove-btn" (click)="removeCombo(combo.tId)" [disabled]="isSubmitting">
            <i class="fa fa-trash"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <h3 class="total-amount">Total Amount: {{ getTotalAmount() }}</h3>

  <button class="submit-btn" (click)="onSubmit()" [disabled]="isSubmitting || !hasAvailableOptions">Submit Bets</button>
</div>

<div *ngIf="activeTab === 'receipt'" class="receipt-section">
  <div class="receipt-message">
    <i class="fa fa-check-circle icon-success"></i>
    <p class="main-message">Bet Confirmed</p>
    <p class="main-message">at {{ currentDateTime }}</p>

    <table class="combo-table receipt-table">
      <thead>
        <tr>
          <th>Ticket No.</th>
          <th>Combination</th>
          <th>Type</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let combo of submittedCombos">
          <td>{{ combo.tId }}</td>
          <td>{{ combo.cmb }}</td>
          <td>{{ combo.typ }}</td>
          <td>{{ combo.amt }}</td>
        </tr>
      </tbody>
    </table>

    <p class="sub-message">ðŸŽ° Wishing you a lucky draw!</p>
    <p class="sub-message">Entered By: {{ agt }}</p>
    <button class="done-btn" (click)="goDone()">Done</button>
  </div>
</div>
